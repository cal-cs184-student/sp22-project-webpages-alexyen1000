<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=-ou4pOz2rBQXdlj5C-P57A');.lst-kix_a4ymcn2ym4t1-1>li:before{content:"\0025cb  "}ul.lst-kix_8s0n87a3x9tp-1{list-style-type:none}ul.lst-kix_8s0n87a3x9tp-0{list-style-type:none}.lst-kix_a4ymcn2ym4t1-3>li:before{content:"\0025cf  "}.lst-kix_a4ymcn2ym4t1-0>li:before{content:"\0025cf  "}.lst-kix_a4ymcn2ym4t1-4>li:before{content:"\0025cb  "}.lst-kix_a4ymcn2ym4t1-5>li:before{content:"\0025a0  "}ul.lst-kix_8s0n87a3x9tp-8{list-style-type:none}ul.lst-kix_8s0n87a3x9tp-7{list-style-type:none}ul.lst-kix_8s0n87a3x9tp-6{list-style-type:none}ul.lst-kix_8s0n87a3x9tp-5{list-style-type:none}ul.lst-kix_8s0n87a3x9tp-4{list-style-type:none}.lst-kix_a4ymcn2ym4t1-6>li:before{content:"\0025cf  "}ul.lst-kix_8s0n87a3x9tp-3{list-style-type:none}ul.lst-kix_8s0n87a3x9tp-2{list-style-type:none}.lst-kix_a4ymcn2ym4t1-2>li:before{content:"\0025a0  "}ul.lst-kix_msqa1dqozyry-1{list-style-type:none}ul.lst-kix_msqa1dqozyry-0{list-style-type:none}ul.lst-kix_msqa1dqozyry-3{list-style-type:none}ul.lst-kix_msqa1dqozyry-2{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-8{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-4{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-5{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-6{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-7{list-style-type:none}.lst-kix_b0bpeuuxl7ws-2>li:before{content:"\0025a0  "}.lst-kix_b0bpeuuxl7ws-1>li:before{content:"\0025cb  "}.lst-kix_b0bpeuuxl7ws-3>li:before{content:"\0025cf  "}.lst-kix_b0bpeuuxl7ws-0>li:before{content:"\0025cf  "}.lst-kix_b0bpeuuxl7ws-4>li:before{content:"\0025cb  "}.lst-kix_a4ymcn2ym4t1-7>li:before{content:"\0025cb  "}.lst-kix_a4ymcn2ym4t1-8>li:before{content:"\0025a0  "}ul.lst-kix_msqa1dqozyry-8{list-style-type:none}ul.lst-kix_msqa1dqozyry-5{list-style-type:none}ul.lst-kix_msqa1dqozyry-4{list-style-type:none}ul.lst-kix_msqa1dqozyry-7{list-style-type:none}ul.lst-kix_msqa1dqozyry-6{list-style-type:none}.lst-kix_msqa1dqozyry-2>li:before{content:"\0025a0  "}.lst-kix_msqa1dqozyry-4>li:before{content:"\0025cb  "}.lst-kix_b0bpeuuxl7ws-8>li:before{content:"\0025a0  "}.lst-kix_8s0n87a3x9tp-8>li:before{content:"\0025a0  "}.lst-kix_msqa1dqozyry-1>li:before{content:"\0025cb  "}.lst-kix_msqa1dqozyry-5>li:before{content:"\0025a0  "}.lst-kix_b0bpeuuxl7ws-6>li:before{content:"\0025cf  "}.lst-kix_8s0n87a3x9tp-7>li:before{content:"\0025cb  "}.lst-kix_b0bpeuuxl7ws-5>li:before{content:"\0025a0  "}.lst-kix_b0bpeuuxl7ws-7>li:before{content:"\0025cb  "}.lst-kix_msqa1dqozyry-0>li:before{content:"\0025cf  "}.lst-kix_msqa1dqozyry-6>li:before{content:"\0025cf  "}.lst-kix_msqa1dqozyry-8>li:before{content:"\0025a0  "}.lst-kix_8s0n87a3x9tp-5>li:before{content:"\0025a0  "}.lst-kix_8s0n87a3x9tp-6>li:before{content:"\0025cf  "}.lst-kix_msqa1dqozyry-7>li:before{content:"\0025cb  "}ul.lst-kix_b0bpeuuxl7ws-3{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-0{list-style-type:none}.lst-kix_8s0n87a3x9tp-3>li:before{content:"\0025cf  "}ul.lst-kix_b0bpeuuxl7ws-4{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-1{list-style-type:none}ul.lst-kix_b0bpeuuxl7ws-5{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-2{list-style-type:none}ul.lst-kix_b0bpeuuxl7ws-6{list-style-type:none}ul.lst-kix_a4ymcn2ym4t1-3{list-style-type:none}ul.lst-kix_b0bpeuuxl7ws-7{list-style-type:none}ul.lst-kix_b0bpeuuxl7ws-8{list-style-type:none}.lst-kix_8s0n87a3x9tp-0>li:before{content:"\0025cf  "}.lst-kix_8s0n87a3x9tp-4>li:before{content:"\0025cb  "}.lst-kix_8s0n87a3x9tp-1>li:before{content:"\0025cb  "}ul.lst-kix_b0bpeuuxl7ws-0{list-style-type:none}ul.lst-kix_b0bpeuuxl7ws-1{list-style-type:none}.lst-kix_8s0n87a3x9tp-2>li:before{content:"\0025a0  "}ul.lst-kix_b0bpeuuxl7ws-2{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_msqa1dqozyry-3>li:before{content:"\0025cf  "}ol{margin:0;padding:0}table td,table th{padding:0}.c0{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:290.2pt;border-top-color:#000000;border-bottom-style:solid}.c10{color:#808080;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c33{color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c3{color:#808080;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c21{color:#666699;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Arial";font-style:normal}.c24{color:#666699;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:21pt;font-family:"Arial";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center;height:11pt}.c9{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:center;height:11pt}.c25{font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c20{font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8.5pt;font-family:"Arial";font-style:normal}.c18{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c26{font-weight:400;text-decoration:none;vertical-align:baseline;font-size:23pt;font-family:"Ubuntu";font-style:normal}.c8{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c17{padding-top:12pt;padding-bottom:2pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c31{padding-top:24pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:center}.c32{padding-top:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c5{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c27{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c15{padding-top:14pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c13{font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c11{margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto}.c23{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c22{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c30{font-size:13pt;color:#666699;font-weight:700}.c28{background-color:#ffffff;max-width:580.5pt;padding:72pt 18pt 72pt 13.5pt}.c16{color:inherit;text-decoration:inherit}.c6{padding:0;margin:0}.c19{margin-left:36pt;padding-left:0pt}.c14{height:11pt}.c1{height:0pt}.c34{font-weight:700}.c12{color:#808080}.c29{height:14pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c28"><h1 class="c31" id="h.fygmoyw3gz35"><span class="c12 c26">CS 184: Sp2022</span></h1><h4 class="c17" id="h.5x1meu3ju9jf"><span class="c3">Alex Yen | Gabriel Khouri-Haddad</span></h4><p class="c7"><span class="c4"></span></p><p class="c8"><span class="c24">PATH TRACER</span></p><h3 class="c15" id="h.ac27z3vsna0v"><span class="c30">Overview</span></h3><p class="c8"><span class="c10">In this project we created a path tracer in order to render scenes in realistic lighting in a more efficient manner.</span></p><p class="c7"><span class="c10"></span></p><p class="c8"><span class="c10">The first task was to do ray generation and allow the ray to interact with the scene. We transformed a position from image space in order to find the direction in world space, thus giving us our ray. Using this ray generator allowed us to sample pixels by casting the rays multiple times and finding the average radiance the rays accumulated based on where they intersect in the scene. Scene intersection was handled in two ways for triangles and spheres: Using the Moller Trumbore algorithm and the quadratic equation respectively</span></p><p class="c7"><span class="c10"></span></p><p class="c8"><span class="c10">This, however, was slow, since it required checking every single primitive for an intersection. To remedy this, we created a bounding volume hierarchy, which partitioned primitives in boxes based on the median coordinate of the largest dimension of the parent box. By checking for the ray&rsquo;s intersection with boxes before looking at primitives (where the final box will only contain a handful of), we&rsquo;ve reduced the time complexity to log time, instead of linear time.</span></p><p class="c7"><span class="c10"></span></p><p class="c8"><span class="c10">Next, we worked on direct light illumination. The first step was to calculate the diffuse BSDF, which was thankfully very simple as all the materials reflected light in all directions equally. To do zero-bounce checking, we just had to return if the intersection was at a light or not. For one bounce hemisphere illumination, we sample a random vector direction from the hit point, and then check the illumination of the resulting intersection, adding it to the total. Then we divide to get the average light. For importance sampling, we instead iterate over each light and then iterate again for the number of samples. Now the sample is provided by a built-in function, though we only add it to the total if the intersection check returns false, as that indicates we&rsquo;re in shadow. Putting this together allowed us to do direct illumination</span></p><p class="c7"><span class="c10"></span></p><p class="c8"><span class="c10">Next, we did indirect illumination. This required a recursive call, which would only occur if a Russian Roulette random coin flip let us and if our ray depth, that is how many bounces it took, did not exceed the max set parameter. We first get the value of the one bounce radiance before adding the recursive call to it to then give us at least one bounce radiance. This allowed us to do global illumination, in which light could reflect off of objects, such as the red color of a wall reflecting into a shadow.</span></p><p class="c7"><span class="c10"></span></p><p class="c8"><span class="c10">This was very slow, so we implemented adaptive sampling. This would measure a convergence of a pixel, which is essentially how much noise has been eliminated. Some parts of an image reduce noise faster than others based on how many samples you take. By using adaptive sampling, we can stop once the pixel&rsquo;s convergence meets an acceptable threshold (calculated using the variance and mean of the pixel&rsquo;s illuminance), allowing us to cut down on unneeded sampling and still generating globally illuminated images</span></p><p class="c7"><span class="c10"></span></p><hr><p class="c9"><span class="c3"></span></p><h3 class="c15" id="h.28gc17keqxt8"><span class="c21">Part 1: Ray Generation and Scene Intersection</span></h3><p class="c8"><span class="c12">To generate a ray, we must first calculate its direction given an (x, y) position in image space. To do this, we must first calculate the bottom left corner and top right corner of the sensor. These can be calculated using the known hFov and vFov values. The bottom left corner is at </span><img src="images/image1.png"><span class="c12">&nbsp;and the top right corner is at </span><img src="images/image2.png"><span class="c3">. Knowing this, we can translate the given (x, y) position by multiplying it by the difference of the top right and bottom left positions, and then adding that to the bottom left position, treating it as an origin.</span></p><p class="c8"><span class="c3">To get its direction, we then multiply the c2w rotation matrix by it, and then normalizing. This allows us to create our ray using the provided camera pos as its origin, and our calculated direction. Finally, we set the min_t and max_t to the near and far clipping planes respectively.</span></p><p class="c8"><span class="c3">To raytrace a pixel of a given positions, we iterate over the number of samples to find the average radiance, offsetting each ray&rsquo;s target position by a small amount and updating the sample buffer&rsquo;s radiance at that position</span></p><p class="c7"><span class="c3"></span></p><p class="c8"><span class="c3">To test for intersection of a sphere, we use the quadratic formula and set a, b, c to: </span></p><p class="c8"><img src="images/image3.png"></p><p class="c8"><img src="images/image4.png"></p><p class="c8"><img src="images/image5.png"></p><p class="c8"><span class="c3">Where r.d is the ray&rsquo;s direction, r.o is its origin, s.o is the sphere&rsquo;s center, and R is the radius</span></p><p class="c8"><span class="c3">After solving the quadratic formula, if the inside of the square root was negative, we missed the circle. If it was zero, then there was a single intersection. If it was positive, we set the smaller value to t1, and the larger to t2. If either of the latter two cases happen, we then check to see if it&rsquo;s a valid intersection, which is if t1 falls in between the min_t and max_t of the provided ray. Finally, if all of that holds up, we can return true and update the intersection params.</span></p><p class="c7"><span class="c3"></span></p><p class="c8"><span class="c3">To test for the intersection of a triangle, we used the M&ouml;ller-Trumbore Algorithm and the provided parameters for the triangle and the ray to do fewer vector calculaltions. This not only gives us the t value for the intersection, but also the barycentric coordinates for the triangle intersection. If any of the barycentric coordinates were less than 0 or greater than 1, then the ray did not intersect the triangle. Once again, we check the min_t and max_t to make sure that an intersection is valid if it did pass the above conditions</span></p><p class="c7"><span class="c3"></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 350.50px; height: 261.87px;"><img alt="" src="images/image19.png" style="width: 350.50px; height: 261.87px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 350.14px; height: 261.86px;"><img alt="" src="images/image43.png" style="width: 350.14px; height: 261.86px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c3"></span></p><hr><p class="c9"><span class="c12 c13"></span></p><h3 class="c15" id="h.z35prlusp4oe"><span class="c21">Part 2: Bounding Volume Hierarchy</span></h3><p class="c5"><span class="c3">Our BVH uses a median based splitting heuristic, that is to say we find the median coordinate of all the primitives and partition the left side to values below the median and the right side to those equal to or above it. The coordinate we choose is determined by the current box&rsquo;s longest dimension length. </span></p><p class="c5"><span class="c3">Our BVH construction begins by making a copy of the primitives vector so that we don&rsquo;t lose it and get segfaults.</span></p><p class="c5"><span class="c3">Now we can begin the recursive base case. If the size of the primitives vector is greater than the max leaf size, we continue, otherwise we just return the vector and it becomes a leaf in the hierarchy. Otherwise we start building the split point.</span></p><p class="c5"><span class="c3">To do this, we create two new primitives vectors, l and r to represent the left and right sides of the tree, as well as defining the box&rsquo;s extent in all 3 dimensions. We also create a vector of pairs containing a double (which will represent the largest dimension of a primitive) and the primitive itself. We determine which dimension of the box is largest, and then start pushing that dimension&rsquo;s coordinate and primitive itself into the vector of pairs for all primitives. Due to the nature of pairs in C++, we can sort the resulting vector of pairs automatically by the first value of the pair (that being the coordinate), which allows us to easily split the vector in half to partition by the median. The left and right sides then both make the recursive calls on themselves, and we set the node&rsquo;s left and right parameters to those outputs of the recursion.</span></p><p class="c5"><span class="c3">Cow: 5856 primitives</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 537.33px; height: 401.93px;"><img alt="" src="images/image38.png" style="width: 537.33px; height: 401.93px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c3">Without BVH Accel: 12.0428s</span></p><p class="c5"><span class="c3">BVH Accel: 0.0620s</span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5"><span class="c3">Lucy: 133796 primitives</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 528.23px; height: 396.50px;"><img alt="" src="images/image28.png" style="width: 528.23px; height: 396.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c3">Without BVH Accel 342.9882s: </span></p><p class="c5"><span class="c3">BVH Accel: 0.0669s</span></p><p class="c5"><span class="c12">We can observe a massive speedup, and indeed, the BVH Acceleration changes the asymptotic runtime from </span><img src="images/image6.png"><span class="c12">&nbsp;to </span><img src="images/image7.png"><span class="c3">. Lucy was able to render 4900 times as fast! While constructing the BVH adds some overhead time due to sorting and iterating through the vectors, it&rsquo;s a one and done thing, which saves a huge amount of time from not having to check every single primitive for every single ray. Once a ray enters a bounding box, it won&rsquo;t have to check any box that&rsquo;s in a different branch of the tree at lower levels. As a result, when checking the intersection for an array, we can skip and ignore the vast majority of primitives.</span></p><p class="c5"><span class="c12">Doing some rough math shows that </span><img src="images/image8.png"><span class="c12">, which is over 25 thousand times as small as the original number of primitives. This is higher than the actual speedup of ~5 thousand, but being off by a factor of 5 of the expected runtime is very close, not even an order of magnitude.</span></p><hr><p class="c5 c14"><span class="c4"></span></p><h3 class="c15" id="h.ruxjvl9umkmm"><span class="c21">Part 3: Direct Illumination</span></h3><ul class="c6 lst-kix_b0bpeuuxl7ws-0 start"><li class="c5 c19 li-bullet-0"><span class="c3">Walk through both implementations of the direct lighting function.</span></li></ul><p class="c27"><span class="c3">The first algorithm we implemented was direct lighting with uniform hemisphere sampling. This works by uniformly sampling rays coming from a hemisphere and aggregating the incoming light that intersects at a specific point, called the hit point. To achieve this, we used a Monte Carlo estimator shown in lecture. Then, we calculate the amount of outgoing light that&rsquo;s reflected.</span></p><p class="c27"><span class="c3">The second algorithm we implemented was direct lighting with importance sampling which directly samples light rays from the different light sources. We check whether the sampled light ray intersects with the hit point, and then if so, can calculate the reflected amount of light at that point and update accordingly. </span></p><p class="c5"><span class="c3">Here we can see a comparison between the two methods:</span></p><a id="t.9253e6d3a4490c56f52cee9030f81ed75d762877"></a><a id="t.0"></a><table class="c11"><tbody><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image46.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image29.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">Hemisphere 1-1</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">Importance 1-1</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image40.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image24.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c12">Hemisphere 64-32</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">Importance 64-32</span></p></td></tr></tbody></table><p class="c8"><span class="c3">It&rsquo;s clear that there is a lot more noise in the hemisphere sampling method compared to the importance sampling. Even with a low sampling rate, importance sampling manages to do pretty well in regards to noise, whereas the hemisphere sampling method, with 64 samples per ray, still has a fuzzy haze over the entire image. This is likely because with hemisphere sampling, we might end up sampling a ray that bounces off and never hits a light. This isn&rsquo;t an issue with importance sampling because we directly sample the lights, and so the only visible noise is in the shadow of the bunny. Even then, the noise isn&rsquo;t as prominent and mostly goes away with moderate sampling rates.</span></p><p class="c7"><span class="c4"></span></p><p class="c7"><span class="c4"></span></p><p class="c8"><span class="c3">Below is a comparison showing the level of noise in the lighting given only 1 sample per pixel, with the number of light rays being the variable</span></p><p class="c7"><span class="c3"></span></p><a id="t.85ee512bd4537aaa86dc5116be845a5e059a2636"></a><a id="t.1"></a><table class="c11"><tbody><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 373.33px;"><img alt="" src="images/image22.png" style="width: 373.00px; height: 373.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 373.33px;"><img alt="" src="images/image37.png" style="width: 373.00px; height: 373.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1 Light Sample</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">4 Light Samples</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 373.33px;"><img alt="" src="images/image23.png" style="width: 373.00px; height: 373.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 373.33px;"><img alt="" src="images/image26.png" style="width: 373.00px; height: 373.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">16 Light Samples</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">64 Light Samples</span></p></td></tr></tbody></table><p class="c7"><span class="c3"></span></p><p class="c8"><span class="c3">And here&rsquo;s a cleaner image with 64 samples, 32 lights</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 361.50px; height: 361.50px;"><img alt="" src="images/image27.png" style="width: 361.50px; height: 361.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c3"></span></p><p class="c8"><span class="c12">As we can see, the noise gets reduced as we introduce more rays, and the image gets brighter while the shadows become more defined. The shadow is barely visible in the l = 1 image.</span></p><hr><h3 class="c15 c29" id="h.2njyaznd4lht"><span class="c21"></span></h3><h3 class="c15" id="h.wv1q8rkj8nyj"><span class="c30">Part 4: Global Illumination</span></h3><p class="c18 c14"><span class="c4"></span></p><p class="c5"><span class="c12">The indirect lighting function works by computing the estimated light from multiple ray bounces and aggregating them together to get the average. This is achieved by calculating the one bounce radiance first and adding the aggregate radiance from all subsequent bounces. Note that we stop here if the max ray depth isn&rsquo;t greater than 1. The recursion portion of the function is what calculates the radiance from the additional bounces, which keeps track of the depth of the newly generated ray and decrements it every time the ray bounces. We used a </span><span class="c12 c34">termination probability of 0.4</span><span class="c3">&nbsp;for our Russian Roulette method, which helps terminate the recursion probabilistically if the coinflip fails. Otherwise, we also have a base case that makes sure our current depth is greater than 1.</span></p><p class="c5"><span class="c3">Global Illumination on a sphere</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.00px; height: 360.00px;"><img alt="" src="images/image20.png" style="width: 480.00px; height: 360.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c18 c14"><span class="c4"></span></p><p class="c8"><span class="c3">Global Illumination on a bunny</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.00px; height: 360.00px;"><img alt="" src="images/image34.png" style="width: 480.00px; height: 360.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c14 c18"><span class="c20 c12"></span></p><p class="c18 c14"><span class="c12 c20"></span></p><p class="c8"><span class="c3">Direct vs Indirect Illumination:</span></p><a id="t.2e514aeb939d5ec8e27511b78c7f70c7b2cf53dc"></a><a id="t.2"></a><table class="c11"><tbody><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image44.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image45.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">Direct Illumination</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">Indirect Illumination</span></p></td></tr></tbody></table><p class="c8"><span class="c3">Combined:</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image35.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c3"></span></p><p class="c8"><span class="c3">Changing max ray depth</span></p><a id="t.803555b462d33942099894689d6b3cbb40bda92c"></a><a id="t.3"></a><table class="c11"><tbody><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image30.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image33.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 samples, max ray depth of 0</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 samples, max ray depth of 1</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image36.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image25.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 samples, max ray depth of 2</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 samples, max ray depth of 3</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image34.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image18.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 samples, max ray depth of 5</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 samples, max ray depth of 100</span></p></td></tr></tbody></table><p class="c5 c14"><span class="c3"></span></p><p class="c5"><span class="c3">Changing number of samples</span></p><a id="t.72beb7c8828b97b455bcaa62633bd7d377a078cf"></a><a id="t.4"></a><table class="c11"><tbody><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image32.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image42.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1 Sample</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">2 Samples</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image16.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image41.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">4 Samples</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">8 Samples</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image15.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image21.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">16 Samples</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">32 Samples</span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image17.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 373.00px; height: 280.00px;"><img alt="" src="images/image35.png" style="width: 373.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr><tr class="c1"><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">64 Samples</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c2"><span class="c3">1024 Samples</span></p></td></tr></tbody></table><p class="c5 c14"><span class="c3"></span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5 c14"><span class="c3"></span></p><p class="c14 c32"><span class="c3"></span></p><hr><p class="c7"><span class="c4"></span></p><h3 class="c15" id="h.e6utccj16a91"><span class="c21">Part 5: Adaptive Sampling</span></h3><p class="c5"><span class="c3">Adaptive Sampling works by calculating a pixel&rsquo;s convergence metric during ray tracing. If the pixel has not converged, we continue sampling with the goal of reducing noise. If the pixel has converged, we can be confident that the noise has been reduced and can stop sampling. In this approach, Adaptive Sampling allows us to leverage a pixel&rsquo;s convergence metric in order to focus the sampling process on portions of the image where pixels have lots of noise and thus require more sampling to mitigate. </span></p><p class="c5"><span class="c3">To implement this, it was a simple addition to the ray generation function. We keep track of the mean and variance over the number of samples taken so far, both of which can be calculated by using the sum of the illuminance of the ray where</span></p><p class="c5"><img src="images/image9.png"></p><p class="c5"><img src="images/image10.png"></p><p class="c5"><img src="images/image11.png"></p><p class="c5"><img src="images/image12.png"></p><p class="c5"><span class="c3">Knowing these, we can calculate the convergence value:</span></p><p class="c5"><img src="images/image13.png"></p><p class="c5"><span class="c12">And test to see if </span><img src="images/image14.png"></p><p class="c5"><span class="c3">If it is, we break and set the sample buffer and sample count buffer to the calculated values so far. In order to prevent us from making this calculation every time we draw a sample, we have a sample batch size passed in, and so we only perform this check when our sample count is a multiple of the batch size. Doing this allows us to stop sampling when we&rsquo;ve reduced noise, allowing us to generate a noiseless image like below, as well as seeing the sample rate, which is determined by the number of samples taken before breaking due to convergence (or not breaking, which is what red signifies)</span></p><p class="c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.00px; height: 360.00px;"><img alt="" src="images/image31.png" style="width: 480.00px; height: 360.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c3"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.00px; height: 360.00px;"><img alt="" src="images/image39.png" style="width: 480.00px; height: 360.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c5"><span class="c3">In this case, blue means a low sample rate and red means a high one with green in between. We can see that the dark background converged immediately, but more complicated geometry, especially parts of the dragon that were in slight shadow, required the full amount of samples and did not converge.</span></p><p class="c5 c14"><span class="c3"></span></p><p class="c5"><span class="c22"><a class="c16" href="https://www.google.com/url?q=https://github.com/cal-cs184-student/sp22-project-webpages-alexyen1000/blob/master/proj3-1/index.html&amp;sa=D&amp;source=editors&amp;ust=1648439358155305&amp;usg=AOvVaw3QYQcMFJkkkeT4FSRB-eTK">https://github.com/cal-cs184-student/sp22-project-webpages-alexyen1000/blob/master/proj3-1/index.html</a></span></p><p class="c5 c14"><span class="c3"></span></p><div><p class="c18 c14"><span class="c4"></span></p><p class="c18 c14"><span class="c4"></span></p></div></body></html>